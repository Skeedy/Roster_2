<div [@pool] *ngIf="poolList" class="dialog">
  <h5 style="color: #fff; text-align: center"> {{nameRaid}}</h5>
  <h6 style="color: #FFF; text-align: center"> Chest nÂ°{{numberChest}}</h6>
  <div class="d-flex justify-content-center align-items-center">
    <div>
      <div *ngIf="raidValue != 4">
        <div class="mx-3">
          <div *ngFor="let item of itemRaid | isCoffer" >
            <img class="coffer-img my-4" [ngClass]="{'active' :(lootSlot?.item_id && item.id == lootSlot?.item_id),
                          'selected': item.id == itemSelected}"
                 (click)="setItem(item.id); slotItemId = item.slot.id; itemObject = item;"
                 src="{{item.imgUrl}}"  matTooltip="{{item.name}}">
          </div>
        </div>
      </div>
      <div *ngIf="raidValue == 4 && numberChest != 1">
        <div class="mx-sm-3">
          <div *ngFor="let item of itemRaid | isCoffer" >
            <img class="coffer-img my-4" [ngClass]="{'active' :(lootSlot?.item_id && item.id == lootSlot?.item_id),
                          'selected': item.id == itemSelected}"
                 (click)="setItem(item.id);
                 slotItemId = item.slot.id;
                 itemObject = item;"
                 src="{{item.imgUrl}}" matTooltip="{{item.name}}">
          </div>
        </div>
      </div>
      <div class="mr-sm-4 d-flex flex-wrap justify-content-center" style="width: min-content" *ngIf="raidValue == 4 && numberChest == 1">
        <div class="d-flex flex-sm-column flex-row">
          <div class="d-flex align-items-center flex-column flex-sm-row my-sm-2">
            <div class="mr-sm-3">
              <img class="role-img" src="https://xivapi.com/cj/misc/bordered_tank.png">
            </div>
            <div class="ml-sm-2 d-flex flex-column flex-sm-row">
              <div *ngFor="let item of itemRaid | isNotCoffer | tankWeapon" >
                <img class="weap-icon mx-1" [ngClass]="{'active' :(lootSlot?.item_id && item.id == lootSlot?.item_id),
                          'selected': item.id == itemSelected}"
                     (click)="setItem(item.id);
                 slotItemId = item.slot.id;
                 itemObject = item;"
                     src="{{item.imgUrl}}" height="65px" matTooltip="{{item.name}}">
              </div>
            </div>
          </div>
          <div class="d-flex align-items-center flex-column flex-sm-row my-sm-2">
            <div class="mr-sm-3">
              <img class="role-img" src="https://xivapi.com/cj/misc/bordered_healer.png">
            </div>
            <div class="ml-sm-2 d-flex flex-column flex-sm-row">
              <div *ngFor="let item of itemRaid | isNotCoffer | healWeapon" >
                <img class="weap-icon mx-1" [ngClass]="{'active' :(lootSlot?.item_id && item.id == lootSlot?.item_id),
                          'selected': item.id == itemSelected}"
                     (click)="setItem(item.id);
                 slotItemId = item.slot.id;
                 itemObject = item;"
                     src="{{item.imgUrl}}" matTooltip="{{item.name}}">
              </div>
            </div>
          </div>
        </div>
        <div class="d-flex flex-sm-column flex-row">
          <div class="d-flex align-items-center flex-column flex-sm-row my-sm-2">
            <div class="mr-sm-3">
              <img class="role-img" src="https://xivapi.com/cj/misc/bordered_dps.png">
            </div>
            <div class="ml-sm-2 d-flex flex-column flex-sm-row">
              <div *ngFor="let item of itemRaid | isNotCoffer | meleeWeapon" >
                <img class="weap-icon mx-1 " [ngClass]="{'active' :(lootSlot?.item_id && item.id == lootSlot?.item_id),
                          'selected': item.id == itemSelected}"
                     (click)="setItem(item.id);
                 slotItemId = item.slot.id;
                 itemObject = item;"
                     src="{{item.imgUrl}}" matTooltip="{{item.name}}">
              </div>
            </div>
          </div>
          <div class="d-flex align-items-center flex-column flex-sm-row my-sm-2">
            <div class="mr-sm-3">
              <img class="role-img" src="https://xivapi.com/cj/misc/bordered_dps_ranged.png">
            </div>
            <div class="ml-sm-2 d-flex flex-column flex-sm-row">
              <div *ngFor="let item of itemRaid | isNotCoffer | rangedWeapon" >
                <img class="weap-icon mx-1" [ngClass]="{'active' :(lootSlot?.item_id && item.id == lootSlot?.item_id),
                          'selected': item.id == itemSelected}"
                     (click)="setItem(item.id);
                 slotItemId = item.slot.id;
                 itemObject = item;"
                     src="{{item.imgUrl}}"  matTooltip="{{item.name}}">
              </div>
            </div>
          </div>
          <div class="d-flex align-items-center flex-column flex-sm-row my-sm-2">
            <div class="mr-sm-3">
              <img class="role-img" src="https://xivapi.com/cj/misc/bordered_dps_magic.png">
            </div>
            <div class="ml-sm-2 d-flex flex-column flex-sm-row">
              <div *ngFor="let item of itemRaid | isNotCoffer | magicWeapon" >
                <img class="weap-icon mx-1" [ngClass]="{'active' :(lootSlot?.item_id && item.id == lootSlot?.item_id),
                          'selected': item.id == itemSelected}"
                     (click)="setItem(item.id);
                 slotItemId = item.slot.id;
                 itemObject = item;"
                     src="{{item.imgUrl}}"  matTooltip="{{item.name}}">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="d-flex justify-content-around flex-column">
      <div *ngFor="let player of players" class="d-flex my-2 align-items-center">
        <img  class="player-img" src="{{player.imgUrl}}" matTooltip="{{player.name}}">
        <div *ngFor="let playerJob of player.playerJobs">
          <app-player-job-loot
            (playerJobSelected)="getPlayerJob($event)"
            [playerJobSel]=playerJobSelected
            [playerJobSet] = playerJobSet
            [playerJob]="playerJob"
            [lootSlot]="lootSlot"
            [item]="itemObject"
            [itemSet] = itemSet
            [slotItemid] = slotItemId>
          </app-player-job-loot>
        </div>
      </div>
    </div>
    <div *ngIf="error" style="color: red"> {{html}}</div>
  </div>
  <div class="d-flex justify-content-center">
    <button class="mr-1" [disabled]="buttonDisabled" mat-button style="background: #23bf5d" (click)="patchLoot(raidValue, numberChest)"> Save</button>
    <button class="ml-1" mat-button style="background: #e86267" (click)="close()"> Close </button>
  </div>
</div>
<div *ngIf="poolList" class="overlay" (click)="close()"></div>
