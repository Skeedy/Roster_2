<div *ngIf="!registrationDone">
  <ngb-alert type="danger" *ngIf="registerFailed" (close)="registerFailed = false">
    Une erreur est survenue, veuillez consulter l'administrateur du site
  </ngb-alert>
  <mat-spinner *ngIf="loading" [diameter]="20"></mat-spinner>
  <mat-card-title class="text-center">S'enregistrer</mat-card-title>
  <mat-card-content>
    <form class="form-content" [formGroup]="registerForm">
      <div class="row justify-content-between">
        <div class="col-6">
          <mat-form-field>
            <input matInput
                   placeholder="firstname"
                   formControlName="fname"
                   autocomplete="Off" required/>
          </mat-form-field>
        </div>
        <div class="col-6 text-right">
          <mat-form-field>
            <input matInput
                   placeholder="lastname"
                   formControlName="lname"
                   autocomplete="Off" required/>
          </mat-form-field>
        </div>
      </div>

      <mat-form-field>
        <input matInput type="password"
               placeholder="{{ password.errors?.pattern ?
                       'Minimum eight characters, at least one uppercase letter, one lowercase letter and one number' :
                       'password' }}"
               formControlName="password"
               autocomplete="Off" required/>
      </mat-form-field>
      <mat-form-field>
        <input matInput type="password"
               placeholder="{{ password.errors?.pattern ?
                       'Minimum eight characters, at least one uppercase letter, one lowercase letter and one number' :
                       'Confirmer password ' }}"
               formControlName="confirmPassword"
               autocomplete="Off" required/>
        <div *ngIf="f.confirmPassword.errors" class="invalid-feedback">
          <div *ngIf="f.confirmPassword.errors.required">Confirm Password is required</div>
          <div *ngIf="f.confirmPassword.errors.mustMatch">Passwords must match</div>
        </div>
      </mat-form-field>
      <mat-form-field>
        <input matInput type="email"
               placeholder="email"
               formControlName="email"
               autocomplete="Off" required/>
      </mat-form-field>
      <button class="mt-3" mat-flat-button
              [disabled]="loading || registerForm.invalid"

              color="warn">
        <span>Envoyer</span>
      </button>
    </form>
  </mat-card-content>
</div>
<mat-card *ngIf="registrationDone">
  <mat-card-title class="text-center">Enregistrement réalisé</mat-card-title>
  <mat-card-content>
    Veuillez consulter votre email afin de confirmer votre inscription.
    Vous pourrez ensuite vous connecter.
  </mat-card-content>
</mat-card>
